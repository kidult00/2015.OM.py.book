# 项目进度


## week0 
2015.05.01

已完成：

- 微信公众号后台搭建
- 豆瓣API的申请和鉴权测试

待完成：

- 实际API的使用
- 返回数据的组织

存在的问题：

- 在web后台中第三方的token管理和刷新有什么好的建议？
- 目前计划用DB存储用户的相关数据，并在访问失效以后做刷新。

可以寻求外援
迭代的想法确认是真需求。


QA

大而全的:django,flask

精简的框架:bottle


qpython,爬虫框架Scrapy,分析web页面


sqlite单用户数据库
automatic

ipad实时沟通微信通话，跨地域沟通。

sae演示


IDEA:

- 能联网统计总结的番茄蛋：只能分成工作学习锻炼
- 番茄工作法物理蛋，
- 能联网，根据Mr Time来总结自己的时间使用。


QA总结：

- 再考察一遍werobot；如何对微信的token进行管理；
- 考虑用kvdb管理token
- 主程完成工作，其他人分工合作；

## Week1
任务分配 
http://www.xmind.net/m/y9BP/

2015.05.08 QA演示总结问题：

- 完成的功能要讲解清楚：（这次默认大家看了邮件，没有提前讲解产品）
- 演示过程功能做成PPT或者示意图分享到群内：（这次用微信，资料发送的邮件）
- 产品功能要保证可用性：（调试授权代码合入后有问题）
- 遇到的问题提前列出清单：（方便老师查看，节约时间）



## Week2 
1. niubility 任务列表

	微信公众号入口操作:

		请求：TED
		
		回复：TED牛人列表
		
		请求：牛人序号
		
		回复：相关的作品[豆瓣]
		
		请求：作品名称
		
		回复：作品介绍
		
		请求：【非必须】想读相关作品
		
		回复：在豆瓣上标记为想读
		
		请求：【非必须】管理员更新牛人列表
		
		回复：TED牛人信息更新

2. 开发进度
	- 开发框架已经搭建好，基于werobot
	- 联调完成douban_client模块
	- 未完成
		- 弓和箭：待合并TED牛人列表功能
		- 00：待合入豆瓣接口返回处理

3. 困难

	原有的设计需要更改：

	- 微信实时中转api查询，效率有问题
	- 需要修改成：管理员在web端基于api统计，微信用户手机端查询结果

4. 经验
	
	- 弄懂流程以后选择合适的框架从wechat_sdk到werobot
	- 理解sae中如何mount
	- 搭建好virtualenv环境，否则模块版本冲突会很麻烦

2015.5.15 演示纪要

目前进度:微信公众号实现基本的机器人查询-回复,如输入"书名",从豆瓣返回授权信息;输入"大牛",返回列表(列表信息还未抓取).


2015.05.22

问题

1. "微信- SAE - 豆瓣" 通路已通,但是产品功能和价值点尚不明确
2. 用微信作为交互界面,后面的多个接口调用总体时间较长,体验不佳

调整计划

2015年05月16日三人碰头后,决定改用网页形式展示,待办事项:  

- 完成网页(H5)原型 -- 00  
- 网页设计和开发 -- 00  
- 抓取 TED 网页的作者信息 -- 弓与箭  
- 存储数据,接口调用和其他 -- free  


## Week3记录
api返回的json是否需要转化，按理可以直接打印dict测试下。
不需要授权的响应速度的问题，是否需要用豆瓣账号登陆来测试。
如何关联豆瓣账号和微信号。

以微信用户为关联；
把授权码存储在werobot的会话中。
如何把豆瓣的授权码填入微信；

- todolist:
1. 如何直接返回URL并在浏览器中打开，应该是返回一个页面？搞定跳转。

2. 比输入douban uid更好的关联方式？
直接传参数过来。
实现，在kvdb中保存json的接口，相当于
kvdb uid
guid  
access_token


3. kvdb 列出 手工写入的ted来的人名列表。(待完成)

4. GET https://api.douban.com/v2/book/17604305?fields=id,title,url
如何带fields过滤。

5. 微信机器人如何返回一个带模板的网页；（未知，已提问）

         <div class="media__message">
             <h4 class="h12 talk-link__speaker">Ken Robinson</h4>
             <h4 class="h9 m5"> <a href="/talks/ken_robinson_says_schools_kill_creativity"> How schools kill creativity </a> </h4>
             <div class="meta">
              <span class="meta__item"> <span class="meta__val"> 33M views </span> </span>
              <span class="meta__item"> <span class="meta__val"> Jun 2006 </span> </span>
             </div>
            </div>

~ 测试调整

api返回的json是否需要转化，按理可以直接打印dict测试下。
不需要授权的响应速度的问题，是否需要用豆瓣账号登陆来测试。
如何关联豆瓣账号和微信号。



以微信用户为关联；
把授权码存储在werobot的会话中。
如何把豆瓣的授权码填入微信；


https://api.weibo.com/oauth2/authorize?client_id=2857799177&redirect_uri=https%3A%2F%2Fsae.sina.com.cn%2Fssl%2F%3Fm%3Dsso%26a%3Dweibo_callback%26sccb%3Dhttp%253A%252F%252Fsae.sina.com.cn%252F%253Fm%253Duser%2526a%253Dreg_check_login&response_type=code&forcelogin=true


https://www.douban.com/service/auth2/auth?scope=douban_basic_common%2Cbook_basic_r%2Cbook_basic_w&redirect_uri=http%3A%2F%2Ffreesz.sinaapp.com%2Flogin&response_type=code&client_id=09009bd8ce37c64f1b01d38a6aa752ed



## week3 QA 和演示 

### 回顾上周
邮件列表沉默，QA作业没有完成  
演示效果的反省没有看到  
微信渠道的演示有综合的方式，希望大家能改善  
 
### 加速编程运行检验的反馈过程  
上周讲怎么样快速建立MVP，建立本地MVP环境  
本地环境最重要的是测试，围绕核心功能，怎么样定义核心功能是可用的  
不仅用代码来构建运行，还要用另外一套代码来保证写出来的功能可用  
这套检验的代码，是为了加速编程，运行，检验过程  

#### 现状
产品功能都是面对用户，人性化的操作比较模糊的  
模糊不清的数据输入需要有明确的分类  
找出模糊输入边界状态，反复输入，迅速知道修改是否正确  
人工输入延长了反馈时间,SAE也不是一个方便的测试环境 
如果整个过程只有5分钟，两个小时只能修改24次，这是修改反馈的效率问题  
缩短反馈循环，不能超过1分钟  

### 问题
基于微信的关键词反馈怎么测试？  
实际上相关的测试代码已经释放出来了   

#### RESTFUL
HTTP协议应该这么用，而不是像FastCGI那么用  
HTTP 协议7种交互方式，GET，POST，PUT，DELETE,OPTION.当初设计不同的协议头，分适合互联网的使用  
补充一个文档介绍:《我所理解的RESTful Web API》  
http://www.cnblogs.com/artech/p/restful-web-api-02.html

#### URI
标示，而不仅是链接  
对资源该以什么方式操作  
GET一定要用幂等的方法，（GET方式被误用成甚至可被删除）  

#### 命令行
命令行是自然的抉择  
window下没有好的调试界面。商业策略吧。linux和mac，命令终端是非常自在的渠道  
bash,zsh，都有很方便的支持，随时调出上次运行的命令。反馈上百次模拟  
window是对shell拙劣的模拟，少了对行的处理  
换成了powershell，但与命令行有本质的不同  
window下，大妈putty连到linux上shell  

#### 解决方法
公众号是非常标准的RESTFUL体系，实际上只有POST关系  
提交过来的xml实际上包含了用户的标准信息，然后我们的后台反应  
对这种情况该如何测试？  
本地模拟SAE环境  
写一个命令行的工具脚本，模拟微信向微信后台发消息  
每次的测试循环控制在几秒内完成  

### Niubility演示总结
#### 问题记录
- 大牛列表选择大牛,这个还未实现  
- 关键词查询：模糊的对，不靠谱  
- 用户提示：应该有，大牛，dn,兼容的命令组  
- 使用兼容微信的环境  
  
#### 总结
- 之前为了赶功能，没有做交互优化，完善微信操作的优化  
- 安排好时间，做H5展示大牛的页面
- 缩短测试的反馈时间。命令行脚本执行测试
- 尝试用语音识别接口处理语音消息
  
遗留问题：  
kvdb的key问题，什么样的姿势是正确的？  
目前使用的是werobot封装的一个转换函数 

```
def to_binary(value, encoding="utf-8"):
    if isinstance(value, six.binary_type):
        return value
    if isinstance(value, six.text_type):
        return value.encode(encoding)
    return six.binary_type(value)
```
bs4太老了，抓取网页的新工具有什么推荐？
  

项目架构图
http://www.xmind.net/m/qEQe/

### 经验
+ 2015.05.16 上周演示后00，弓和箭，free周六一起编程一天，效率很高  
	- 团队成员对其进度，本地环境saecloud等安装，bottle运行原理，werobot的使用等  
	- 明确产品形态，微信交互和web交互的内容  
+ 高强度的快速熟悉一个模块的基本用法kvdb,json,jinjia2,bs4,AngularJS...  
+ 小功能的完成，获得自我反馈

### 有趣的坑，后面会总结写到教程

- github .gitignore
- web端，以豆瓣授权的方式登陆网站并创建用户数据
- jinjia2的模板熟悉使用
- kvdb的使用，utf8的key
- 研究douban api，如何把豆瓣用户和微信用户关联起来，state参数
- 解析豆瓣返回数据，json与python的关联
- douban sdk居然没有封装想读
- 想读的post,put接口该怎么用，已经收藏的书该怎么办。
- AngularJS 与 python的{{}} 冲突
- bs4到底是怎么抓取网页的
- 豆瓣没返回的时候，怎么提示用户

### 困难
- web端 H5页面展示，目前采用AngularJs+Onsen存在技术风险
- 时间不够



## Week4 

### 大妈安利

#### 为什么要留梗

- 希望大家持续改进自己作品的演示效果，大家之前没有接到这个梗
- 大妈喜欢制造各种梗的理由：五元教派的老师通过自己的研究经验总结出高效的学习方式，即把不熟悉的东西映射到自己的隐喻体系。
- 如果把事情直白说出来无人领会，但用梗的方式能吸引人重新探索。以数学课为例，老师把数学家积累百年的东西集中的放出来，效果如何呢？[教材是对好奇心最好的屏蔽]
- 分数，组长，打分，课堂啊，这一切都是用大家熟知习惯的隐喻的体系，来代表全新的我们的行为。开智努力了10年才把这个词创造出来。

#### 宣传方式的反转

- 目前的反转方式：教学体验的反转，公开课的反转，团队型开发的反转，宣传方式的反转

- 电梯演讲能力，表述能力，面对不同的受众的隐喻体系建立的能力。理科生吃过的亏：不善表述，不屑表述，从来没有进行过系统训练表述能力。

- 下周正式给每个组2次45分钟演示的时间，每次演示计分，旗舰班里面包括助教，包括学员，一起打分

- 把大家对于软件工程的误解，迷失，错误崇拜突破，由大家自己组队完成原创作品，逼着大家训练自己的路演能力。创业团队要募集赞助的时候向VC主题式的传达。

#### 如何路演
- 路演的目标及其单纯，内容对受众来说是陌生的。
- 对软件产品，工具和服务，理念或好处传达，要求大家在尽可能短的时间内说清楚自己在做什么，为什么这样做，解决了什么了问题。
- 双方建立了共识，希望大家来帮助我们。
- 其实这种能力大家一直都存在的，比如说深圳小聚会，有一对来自香港的群友，双硕士把双博士变成自己的老婆。路演不同于谈判或者谈恋爱。

#### 日报、周报、迭代演示和路演都是有效的逼迫
- 每一次QA之后都要求大家对自己的演示进行反思分析改进。
- 之前可能大家把所有的精气神集中在怎么样把东西作出来，而不是演示一个半成品。
- 要求每个组要求有周报，组内有站立会议。演示是完备的汇报，每天团队里的所有人是不是清楚现在项目的状态。实际上只有通过正式的，整个产品，完整的演示，才能最有效的，逼迫大家所有人都明白所有功能，现在的项目状态。
这种完备的整体的认知，是对编程思想，网络能力，文学创作的三方面的能力，综合性使用。
举例：frank在周中评审需求的重要性的时候，冷静分析项目的结构。对作品的边界非常清楚，才能做科学的判定。

#### 输出是最好的输入
这种演示，宣传，炫耀，是一种输出，输出是最好的输入。
对自己的作品的结果，及其理解之后，才能确定文案，演示方法等。
个性需求，是否真实解决了日常需求。定义好，传达好，大家才明白。

- 开光结合分享培训的体会：
  + 输出是最好的输入
  + 学习最好的方法是教会别人
- 反复在说知行合一的道理

#### 要准备哪些文档

一个工程该包含哪些文档，之前的wiki模板。  
准备完备的私人教程，面对半年前的你自己，吻合自己的体系。  
淌过很多弯路之后的科学的合理的学习路径。  
整理各种私人指南。  

#### 找好呼吸的节奏
没有时间写教程是给伪命题。
每一次主题输出，快速输出，都是对过去编程实践的一次编程实践的自我整理。这种停顿是对呼吸节奏的调节。
阶段性的反思，才能明白自己学会了哪些技能。
哪怕是每天例会前后的整理；给自己挖坑，列出章节，标题，就是对头脑中的已知数据的清理。

### 演示备忘
#### 开发进度  
1. 代码模块化整理；用graphviz整理微信应答流程，重构代码  
2. 命令行的微信本地测试脚本  
3. 查询TED大牛列表的功能  
4. 增加了语音查书的功能  
5. 做了一些显示优化和bug修改

#### 周二深圳会谈后团队形成的决议
 
+ 考虑时间成本，暂时不对web前端的展示做优化。  
+ 集中精力做团队内部的理解同步，周四晚上继续进行了线下编程分享。
+ 希望最后一个礼拜，希望任何有兴趣的同学加入到我们的项目中来，一起使用，提问，理解项目是怎么运行起来的，看懂代码，能做出些修改。目前微信后台有20多人关注了公众号。
+ 我么不仅仅满足于组内做出一个满意的产品。
更希望其他任何感兴趣的同学能一起参与进来，
弄懂流程，甚至fork出自己的项目。

#### 困难  
教程进度比较慢，列了目录，正在填空中

#### 经验  
一个任务，弄懂基本流程，具备选择能力后，选择合适的框架来，不需要重复发明轮子。


#### 演示总结

+ 思想上没有认知到演示的重要性，仅当成新功能的展示，刷新认识
+ 介绍清楚项目的背景和目前功能，愿景
+ 采用更符合微信线上交互特点的演示方式，不能仅仅让用户摸索，使用。
+ 为演示做好文案方面的准备








